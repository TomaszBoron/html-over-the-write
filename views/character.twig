{% if character %}
<dialog 
open
  id="characterDialog"
  class="m-auto w-full max-w-4xl rounded-lg p-6 bg-white shadow-lg backdrop:bg-black/50 backdrop:backdrop-blur-sm transition-opacity duration-300 opacity-0 open:opacity-100"
>
  <div class="flex flex-col space-y-6">
    <div class="flex">
      <!-- Lewa kolumna: obrazek i podstawowe dane -->
      <div class="w-1/3 pr-6 border-r border-gray-200">
        <div class="w-32 h-32 rounded-full overflow-hidden bg-gray-200 mx-auto">
          <!-- Tu wstaw obrazek postaci -->
          <!-- <img src="/images/characters/{{ character.name|lower|replace({' ': '-'}) }}.jpg" alt="{{ character.name }}" class="w-full h-full object-cover"> -->
        </div>
        <h1 class="text-2xl font-bold text-gray-800 mt-4 text-center">{{ character.name }}</h1>
        <p class="text-gray-600 mt-2">Rasa: 
          <a href="{{ character.race }}" class="text-blue-500 hover:underline">
            {% set raceParts = character.race|split('/') %}{{ raceParts|last|capitalize }}
          </a>
        </p>
        <p class="text-gray-600">Gatunek: 
          <a href="{{ character.species }}" class="text-blue-500 hover:underline">
            {% set speciesParts = character.species|split('/') %}{{ speciesParts|last|capitalize }}
          </a>
        </p>
        <p class="text-gray-600">Królestwo: 
          <a href="{{ character.realm }}" class="text-blue-500 hover:underline">
            {% set realmParts = character.realm|split('/') %}{{ realmParts|last|capitalize }}
          </a>
        </p>
      </div>

      <!-- Prawa kolumna: szczegóły -->
      <div class="w-2/3 pl-6">
        <h2 class="text-lg font-semibold text-gray-700 mb-4">Szczegóły</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-600">
          <div>
            <p><span class="font-semibold">Wzrost:</span> {{ character.height }}</p>
            <p><span class="font-semibold">Kolor włosów:</span> {{ character.hair_color }}</p>
            <p><span class="font-semibold">Kolor oczu:</span> {{ character.eye_color }}</p>
            <p><span class="font-semibold">Data urodzenia:</span> {{ character.date_of_birth }}</p>
            <p><span class="font-semibold">Data śmierci:</span> {{ character.date_of_death }}</p>
            <p><span class="font-semibold">Płeć:</span> {{ character.gender }}</p>
            <p><span class="font-semibold">Grupa:</span> 
              <a href="{{ character.group }}" class="text-blue-500 hover:underline">
                {% set groupParts = character.group|split('/') %}{{ groupParts|last|capitalize }}
              </a>
            </p>
          </div>
          <div>
            <p><span class="font-semibold">Broń:</span>
              {% for weapon in character.weapons %}
                <span class="inline-block bg-gray-200 rounded-full px-2 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2">{{ weapon }}</span>
              {% endfor %}
            </p>
            <p><span class="font-semibold">Języki:</span>
              {% for languageUrl in character.languages %}
                <a href="{{ languageUrl }}" class="inline-block bg-blue-100 text-blue-700 rounded-full px-2 py-1 text-sm font-semibold mr-2 mb-2 hover:bg-blue-200">
                  {% set languageParts = languageUrl|split('/') %}{{ languageParts|last|capitalize }}
                </a>
              {% endfor %}
            </p>
            <p><span class="font-semibold">Filmy:</span>
              {% for filmUrl in character.films %}
                <a href="{{ filmUrl }}" class="inline-block bg-green-100 text-green-700 rounded-full px-2 py-1 text-sm font-semibold mr-2 mb-2 hover:bg-green-200">
                  {% set filmParts = filmUrl|split('/') %}{{ filmParts|last|capitalize }}
                </a>
              {% endfor %}
            </p>
            <p><span class="font-semibold">Książki:</span>
              {% for bookUrl in character.books %}
                <a href="{{ bookUrl }}" class="inline-block bg-yellow-100 text-yellow-700 rounded-full px-2 py-1 text-sm font-semibold mr-2 mb-2 hover:bg-yellow-200">
                  {% set bookParts = bookUrl|split('/') %}{{ bookParts|last|capitalize }}
                </a>
              {% endfor %}
            </p>
            <p><span class="font-semibold">Więcej:</span> 
              <a href="{{ character.url }}" target="_blank" class="text-indigo-500 hover:underline">Zobacz na LOTR API</a>
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="text-right mt-6">
      <a 
        href="/characters"
        class="rounded bg-red-600 text-white px-4 py-2 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400"
      >
        Zamknij
      </a>
    </div>
  </div>
</dialog>
{% endif %}
